(this["webpackJsonpweather-traffic-app"]=this["webpackJsonpweather-traffic-app"]||[]).push([[0],{394:function(e,t,a){},395:function(e,t,a){},397:function(e,t,a){"use strict";a.r(t);a(191),a(201);var n=a(2),r=a.n(n),c=a(89),o=a.n(c),s=a(91),i=a(45),u=a(190),d=a(27),l=a.n(d),p=a(36),m={locationsUrl:"https://api.data.gov.sg/v1/environment/2-hour-weather-forecast",imagesUrl:"https://api.data.gov.sg/v1/transport/traffic-images"},f=l.a.mark(j),h=l.a.mark(g);function j(){var e,t;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.c)();case 2:return e=a.sent,a.next=5,fetch(m.locationsUrl+"?date_time="+e.dateTimeReducer.dateTime+":00").then((function(e){return e.json()}));case 5:return t=a.sent,a.next=8,Object(p.b)({type:"FETCHED_LOCATIONS",json:t});case 8:case"end":return a.stop()}}),f)}function g(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.d)("GET_LOCATIONS",j);case 2:case"end":return e.stop()}}),h)}var O=l.a.mark(A),T=l.a.mark(b);function A(){var e,t;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.c)();case 2:return e=a.sent,a.next=5,fetch(m.imagesUrl+"?date_time="+e.dateTimeReducer.dateTime+":00").then((function(e){return e.json()}));case 5:return t=a.sent,a.next=8,Object(p.b)({type:"FETCHED_LOCATION_IMAGES",json:t});case 8:case"end":return a.stop()}}),O)}function b(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.d)("GET_LOCATION_IMAGES",A);case 2:case"end":return e.stop()}}),T)}var E=l.a.mark(I);function I(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)([g(),b()]);case 2:case"end":return e.stop()}}),E)}var D="DATE_CHANGE",L="TIME_CHANGE",v={date:"2016-03-01",time:"00:00",dateTime:"2016-03-01T00:00"},y="GET_LOCATIONS",x="FETCHED_LOCATIONS",C="SELECTED_AREA",_="SELECTED_AREA_WEATHER",w=a(92),S={areaMetaData:[],areaWeatherData:[],selectedArea:{name:w.selectLocation},selectedAreaWeather:w.noData,loader:{isLoading:!1}},R="FETCHED_LOCATION_IMAGES",N="SELECTED_LOCATION_IMAGE",W={areaImageData:[],selectedLocationImage:{}},M=Object(u.a)(),F=Object(i.c)({dateTimeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,a={date:e.date,time:e.time,dateTime:e.date+"T"+e.time};switch(t.type){case D:return a.date=t.payload||"",a.dateTime=t.payload+"T"+e.time,a;case L:return a.time=t.payload||"",a.dateTime=e.date+"T"+t.payload,a;default:return e}},locationsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0,a={areaMetaData:e.areaMetaData,areaWeatherData:e.areaWeatherData,selectedArea:e.selectedArea,selectedAreaWeather:e.selectedAreaWeather,loader:e.loader};switch(t.type){case y:return a.loader={isLoading:!0},a;case x:return a.areaMetaData=t.json&&t.json.area_metadata&&t.json.area_metadata.length?t.json.area_metadata:[],a.areaWeatherData=t.json&&t.json.items&&t.json.items.length&&t.json.items[0].forecasts?t.json.items[0].forecasts:[],a.loader={isLoading:!1},a;case C:return a.selectedArea=t.payload,a;case _:return a.selectedAreaWeather=t.payload,a;default:return e}},locationImageReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0,a={areaImageData:e.areaImageData,selectedLocationImage:e.selectedLocationImage};switch(t.type){case R:return a.areaImageData=t.json&&t.json.items&&t.json.items.length&&t.json.items[0].cameras.length?t.json.items[0].cameras:[],a;case N:return a.selectedLocationImage=t.payload,a;default:return e}}}),G=Object(i.e)(F,Object(i.a)(M));M.run(I);a(394);var k=a(119),H=a(122),U=a(123),z=a(125),J=a(124),B=(a(395),a(28)),P=r.a.lazy((function(){return a.e(4).then(a.bind(null,408))})),q=r.a.lazy((function(){return a.e(3).then(a.bind(null,407))})),K=r.a.lazy((function(){return a.e(5).then(a.bind(null,406))})),Q=function(e){Object(z.a)(a,e);var t=Object(J.a)(a);function a(e){return Object(H.a)(this,a),t.call(this,e)}return Object(U.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllLocations(),this.props.getAllLocationImages()}},{key:"render",value:function(){return Object(B.jsx)(r.a.Fragment,{children:Object(B.jsxs)(r.a.Suspense,{fallback:Object(B.jsx)("span",{children:"Loading..."}),children:[Object(B.jsx)(K,Object(k.a)({},this.props)),Object(B.jsx)(P,{}),Object(B.jsx)("div",{className:"app-body",children:Object(B.jsx)(q,Object(k.a)({},this.props))})]})})}}]),a}(n.Component),V=Object(s.b)((function(e){return{date:e.dateTimeReducer.date,time:e.dateTimeReducer.time,areaMetaData:e.locationsReducer.areaMetaData,areaWeatherData:e.locationsReducer.areaWeatherData,areaImageData:e.locationImageReducer.areaImageData,selectedArea:e.locationsReducer.selectedArea,selectedAreaWeather:e.locationsReducer.selectedAreaWeather,selectedLocationImage:e.locationImageReducer.selectedLocationImage,loader:e.locationsReducer.loader}}),(function(e){return{dateChanged:function(t){return e(function(e){return{type:D,payload:e}}(t))},timeChanged:function(t){return e(function(e){return{type:L,payload:e}}(t))},getAllLocations:function(){return e({type:y})},getAllLocationImages:function(){return e({type:"GET_LOCATION_IMAGES"})},setSelectedArea:function(t){return e(function(e){return{type:C,payload:e}}(t))},setSelectedAreaWeather:function(t){return e(function(e){return{type:_,payload:e}}(t))},setSelectedLocationImage:function(t){return e(function(e){return{type:N,payload:e}}(t))}}}))(Q),X=function(e){e&&e instanceof Function&&a.e(6).then(a.bind(null,405)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))};o.a.render(Object(B.jsx)(s.a,{store:G,children:Object(B.jsx)(V,{})}),document.getElementById("root")),X()},92:function(e){e.exports=JSON.parse('{"logoTitle":"WeaTraffic App","noData":"No Data","noDataFound":"No Data Found!","selectLocation":"Select Location"}')}},[[397,1,2]]]);
//# sourceMappingURL=main.e7682cf3.chunk.js.map